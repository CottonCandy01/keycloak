kind: Application
apiVersion: argoproj.io/v1alpha1
metadata:
   name: keycloak
   namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/bitnami/charts.git
    targetRevision: main
    path: bitnami/keycloak
    helm:
      values:  |
        postgresql:
          auth:
            password: mypwd
        auth:
          adminUser: admin
          adminPassword: aaAA11!!
        tls:
          enabled: true
          autoGenerated: true
#        image:
#          debug: true
#        logging:
#          level: DEBUG

  destination:
    server: https://kubernetes.default.svc
    namespace: keycloak
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true

